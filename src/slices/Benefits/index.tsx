"use client";

import css from "./index.module.css";

import Heading from "@/components/common/Heading/Heading";
import Section from "@/components/common/Section/Section";

import { Content } from "@prismicio/client";
import { PrismicRichText, SliceComponentProps } from "@prismicio/react";
import clsx from "clsx";

import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { useLayoutEffect } from "react";

gsap.registerPlugin(ScrollTrigger);

export type BenefitsProps = SliceComponentProps<Content.BenefitsSlice>;

const Benefits = ({ slice }: BenefitsProps): JSX.Element => {
  useLayoutEffect(() => {
    gsap.fromTo(
      `.${css.item}`,
      {
        opacity: 0,
        scale: 0.7,
      },
      {
        opacity: 1,
        scale: 1,
        duration: 0.4,
        scrollTrigger: {
          trigger: `.${css.item}`,
        },
        stagger: 0.15,
      }
    );
  });

  return (
    <Section
      data-slice-type={slice.slice_type}
      data-slice-variation={slice.variation}
    >
      <Heading field={slice.primary.title} position="right" />
      <ul className={css.list}>
        {slice.items.map((i, index) => (
          <li key={index} className={css.item}>
            <div className={css.heading}>
              {i.icon === "Security" && (
                <SecurityIcon className={clsx(css.icon, css.stroked)} />
              )}
              {i.icon === "Reliability" && (
                <ReliabilityIcon className={css.icon} />
              )}
              {i.icon === "Competence" && (
                <CompetenceIcon className={css.icon} />
              )}
              {i.icon === "Guarantees" && (
                <GuaranteesIcon className={css.icon} />
              )}
              <PrismicRichText
                field={i.title}
                components={{
                  heading3: ({ children }) => (
                    <h3 className={css.title}>{children}</h3>
                  ),
                }}
              />
            </div>
            <PrismicRichText
              field={i.description}
              components={{
                paragraph: ({ children }) => (
                  <p className={css.description}>{children}</p>
                ),
              }}
            />
          </li>
        ))}
      </ul>
    </Section>
  );
};

function SecurityIcon({ className }: { className?: string }) {
  return (
    <svg
      className={className}
      xmlns="http://www.w3.org/2000/svg"
      width="60"
      height="60"
      fill="none"
    >
      <path
        strokeLinecap="round"
        strokeLinejoin="round"
        strokeWidth="2.5"
        d="M27.75 6.075L8.362 14.062V33.75C8.362 44.3 30 54.375 30 54.375S51.637 44.3 51.637 33.75V14.062L32.25 6.075a5.85 5.85 0 00-4.5 0z"
      ></path>
      <path
        strokeLinecap="round"
        strokeLinejoin="round"
        strokeWidth="2.5"
        d="M21.575 28.862l7.475 7.425 12.025-15.45"
      ></path>
    </svg>
  );
}

function ReliabilityIcon({ className }: { className?: string }) {
  return (
    <svg
      className={className}
      xmlns="http://www.w3.org/2000/svg"
      width="60"
      height="60"
      fill="none"
    >
      <path d="M29.255 49.855c.326 0 .662-.073 1.005-.22.343-.148.62-.328.832-.54l19.49-19.49c.629-.628 1.113-1.27 1.453-1.925a4.63 4.63 0 00.512-2.165 5.51 5.51 0 00-.512-2.315 6.794 6.794 0 00-1.453-2.05l-9.375-9.375c-.618-.628-1.254-1.09-1.907-1.383-.652-.293-1.375-.44-2.17-.44-.785 0-1.514.147-2.188.44-.673.294-1.308.755-1.905 1.383l-2.175 2.175 4.625 4.642a4.744 4.744 0 011.108 1.663 5.19 5.19 0 01.367 1.895c0 1.3-.425 2.376-1.275 3.227-.853.85-1.93 1.275-3.23 1.275a6.13 6.13 0 01-1.877-.292 4.04 4.04 0 01-1.648-1.025L24.15 20.57 13.355 31.362a2.51 2.51 0 00-.57.863c-.127.323-.19.648-.19.975 0 .59.189 1.077.567 1.46.379.383.863.575 1.453.575.326 0 .662-.075 1.005-.225.343-.147.62-.326.832-.538l7.923-7.922 1.77 1.77-7.91 7.925a2.485 2.485 0 00-.57.86c-.127.323-.19.648-.19.975 0 .557.197 1.032.592 1.425.394.395.87.592 1.428.592.326 0 .662-.073 1.005-.22a2.6 2.6 0 00.832-.537l8.5-8.488 1.768 1.77-8.485 8.5c-.222.212-.403.49-.545.833a2.597 2.597 0 00-.215 1.005c0 .557.197 1.032.592 1.425.394.395.87.592 1.428.592.326 0 .651-.063.975-.19a2.53 2.53 0 00.862-.567l8.5-8.488 1.768 1.77-8.5 8.5a2.424 2.424 0 00-.57.91c-.127.355-.19.68-.19.975 0 .59.208 1.066.625 1.428.415.362.885.542 1.41.542m-.015 2.5c-1.285 0-2.385-.47-3.3-1.41-.917-.941-1.319-2.102-1.205-3.482-1.417.017-2.596-.407-3.538-1.27-.943-.862-1.39-2.065-1.342-3.61-1.545.017-2.762-.425-3.65-1.325-.89-.9-1.295-2.085-1.215-3.555-1.39.017-2.553-.375-3.49-1.175-.937-.797-1.405-1.907-1.405-3.33 0-.642.125-1.283.375-1.925a4.849 4.849 0 011.1-1.695l12.58-12.565 6.455 6.455a2.498 2.498 0 001.835.76c.537 0 1.01-.187 1.42-.56.41-.373.615-.86.615-1.458a2.52 2.52 0 00-.213-1.055 2.567 2.567 0 00-.545-.782l-8.6-8.6c-.62-.628-1.264-1.09-1.932-1.383a5.391 5.391 0 00-2.195-.44c-.785 0-1.498.147-2.14.44-.64.294-1.274.755-1.903 1.383L9.337 19.4a6.24 6.24 0 00-1.3 1.912 5.963 5.963 0 00-.525 2.293 6.69 6.69 0 00.145 1.627c.117.522.3 1.012.55 1.47l-1.895 1.893c-.42-.668-.748-1.44-.985-2.313A9.344 9.344 0 015 23.607a8.78 8.78 0 01.682-3.262 8.593 8.593 0 011.87-2.778l7.563-7.562c.871-.862 1.794-1.503 2.767-1.925a7.904 7.904 0 013.155-.628c1.134 0 2.178.21 3.133.63.956.42 1.866 1.061 2.73 1.923l2.175 2.177 2.18-2.177c.872-.862 1.786-1.503 2.742-1.925.957-.418 2.001-.628 3.133-.628a7.87 7.87 0 013.155.63c.973.42 1.89 1.061 2.752 1.923l9.313 9.312a9.34 9.34 0 011.995 2.903 8.21 8.21 0 01.702 3.31c0 1.13-.233 2.173-.7 3.13-.468.957-1.134 1.867-1.997 2.73L32.86 50.865A4.885 4.885 0 0131.165 52a5.275 5.275 0 01-1.925.355"></path>
    </svg>
  );
}

function CompetenceIcon({ className }: { className?: string }) {
  return (
    <svg
      className={className}
      xmlns="http://www.w3.org/2000/svg"
      width="60"
      height="60"
      fill="none"
    >
      <path d="M30 33.75c.355 0 .652-.12.892-.36.239-.238.358-.535.358-.89V20c0-.355-.12-.652-.36-.89-.24-.24-.537-.36-.89-.36s-.65.12-.89.36-.36.537-.36.89v12.5c0 .355.12.652.36.89.24.24.538.36.893.36m7.5-3.75c.353 0 .65-.12.89-.36.238-.238.357-.535.357-.89V22.5c0-.355-.12-.652-.36-.89-.24-.24-.537-.36-.89-.36s-.65.12-.89.36c-.24.238-.36.535-.36.89v6.25c0 .355.12.652.36.89.24.24.538.36.892.36zm-15-1.25c.353 0 .65-.12.89-.36.238-.238.357-.535.357-.89v-5c0-.355-.12-.652-.36-.89-.24-.24-.537-.36-.89-.36s-.65.12-.89.36c-.24.238-.36.535-.36.89v5c0 .355.12.652.36.89.24.24.538.36.893.36zM17.5 52.5v-9.405c-2.375-2.167-4.218-4.602-5.53-7.305-1.312-2.703-1.968-5.478-1.97-8.325 0-5.543 1.944-10.257 5.832-14.14C19.723 9.442 24.445 7.5 30 7.5c4.503 0 8.573 1.37 12.21 4.113 3.635 2.741 5.993 6.283 7.075 10.625l2.59 10.257a1.89 1.89 0 01-.355 1.727c-.403.519-.942.778-1.615.778H45v8.462c0 1.11-.396 2.06-1.188 2.85-.79.792-1.74 1.188-2.85 1.188H35v5h-2.5V45h8.462c.449 0 .817-.144 1.105-.432.289-.289.433-.657.433-1.105V32.5h6.75l-2.375-9.688c-.958-3.823-3.017-6.915-6.175-9.275C37.547 11.18 33.98 10 30 10c-4.833 0-8.958 1.692-12.375 5.075s-5.125 7.5-5.125 12.35c0 2.49.51 4.857 1.533 7.1 1.02 2.242 2.467 4.235 4.342 5.98L20 42v10.5h-2.5z"></path>
    </svg>
  );
}

function GuaranteesIcon({ className }: { className?: string }) {
  return (
    <svg
      className={className}
      xmlns="http://www.w3.org/2000/svg"
      width="60"
      height="60"
      fill="none"
    >
      <path d="M49.688 22.5a19.688 19.688 0 10-31.876 15.445V56.25a.938.938 0 001.357.839L30 51.673l10.833 5.416a.938.938 0 001.355-.839V37.945a19.662 19.662 0 007.5-15.445zm-9.376 32.234l-9.895-4.948a.937.937 0 00-.839 0l-9.89 4.948v-15.47a19.64 19.64 0 0020.625 0v15.47zM30 40.312A17.812 17.812 0 1147.813 22.5 17.831 17.831 0 0130 40.313zm0-30A12.188 12.188 0 1042.188 22.5 12.202 12.202 0 0030 10.312zm0 22.5A10.312 10.312 0 1140.313 22.5 10.324 10.324 0 0130 32.813z"></path>
    </svg>
  );
}

export default Benefits;
